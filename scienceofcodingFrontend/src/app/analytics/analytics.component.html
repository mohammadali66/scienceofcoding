<section class="module-small">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
        <app-today-analytics></app-today-analytics>
      </div>

      <div class="col-md-7">

        <h2>Analytics</h2>

        <hr>
        <!-- line chart -->
        <app-weekchart-analytics></app-weekchart-analytics>
        <hr>

        <div class="row">
          <div class="col-md-12">
            <form #f="ngForm" (ngSubmit)="getAnalyticsForOneDate(f)">
              <div class="row">
                <div class="form-group col-md-2">
                  <label class="control-label">Date:</label>
                </div>
                <div class="form-group col-md-3">
                  <select class="form-control" name="day" ngModel [(ngModel)]="dayNg">
                    <option *ngFor="let d of dayName" value="{{ d.value }}">{{ d.name }}</option>
                  </select>
                </div>

                <div class="form-group col-md-3">
                  <select class="form-control" name="month" ngModel [(ngModel)]="monthNg">
                    <option *ngFor="let m of monthName" value="{{ m.value }}">{{ m.name }}</option>
                  </select>
                </div>

                <div class="form-group col-md-3">
                  <select class="form-control" name="year" ngModel [(ngModel)]="yearNg">
                    <option *ngFor="let y of yearName" value="{{ y.value }}">{{ y.name }}</option>
                  </select>
                </div>
              </div>
              <div class="row form-group">
                <div class="col-sm-6 offset-sm-2">
                  <button type="submit" class="btn btn-default btn-sm btn-block">Display</button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <hr>

        <!-- ------------------------------------------------------------- -->
        <div class="row">
          <div class="col-md-12">
            <form class="form-horizontal" #f2="ngForm" (ngSubmit)="getAnalyticsForTwoDate(f2)">
              <div class="row">
                <div class="col-md-2 form-group">
                  <label class="control-label">from:</label>
                </div>
                <div class="col-md-3 form-group">
                  <select class="form-control" name="fromday" ngModel [(ngModel)]="fromdayNg">
                    <option *ngFor="let d of dayName" value="{{ d.value }}">{{ d.name }}</option>
                  </select>
                </div>

                <div class="col-md-3 form-group">
                  <select class="form-control" name="frommonth" ngModel [(ngModel)]="frommonthNg">
                    <option *ngFor="let m of monthName" value="{{ m.value }}">{{ m.name }}</option>
                  </select>
                </div>

                <div class="col-md-3 form-group">
                  <select class="form-control" name="fromyear" ngModel [(ngModel)]="fromyearNg">
                    <option *ngFor="let y of yearName" value="{{ y.value }}">{{ y.name }}</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-2 form-group">
                  <label class="control-label">to:</label>
                </div>
                <div class="form-group col-md-3">
                  <select class="form-control" name="today" ngModel [(ngModel)]="todayNg">
                    <option *ngFor="let d of dayName" value="{{ d.value }}">{{ d.name }}</option>
                  </select>
                </div>

                <div class="form-group col-md-3">
                  <select class="form-control" name="tomonth" ngModel [(ngModel)]="tomonthNg">
                    <option *ngFor="let m of monthName" value="{{ m.value }}">{{ m.name }}</option>
                  </select>
                </div>

                <div class="form-group col-md-3">
                  <select class="form-control" name="toyear" ngModel [(ngModel)]="toyearNg">
                    <option *ngFor="let y of yearName" value="{{ y.value }}">{{ y.name }}</option>
                  </select>
                </div>
              </div>

              <div class="row form-group">
                <div class="col-sm-6 offset-sm-2">
                  <button type="submit" class="btn btn-default btn-sm btn-block">Display</button>
                </div>
              </div>
            </form>
          </div>
        </div>
        <!-- ---------------------------------------------------------------->
        <hr>
        <div class="row">

            <div *ngIf="pageList">
              <div class="col-md-12" *ngFor="let page of pageList">
              <!-- <ul class="list-group"> -->
                <div class="card">
                  <div class="card-header">{{ page.name }} <span class="badge badge-info">{{ page.clientUserOpenedPage_list.length }}</span></div>
                  <div class="card-body">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>ip</th>
                          <th>country/city</th>
                          <th>start</th>
                          <th>end</th>
                          <th>duration</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let cp of page.clientUserOpenedPage_list">
                          <td>{{ cp.ip }}</td>
                          <td>
                            <img src="assets/images/flags/{{ cp.country }}.png"
                                title="{{ cp.country }}/{{ cp.city }}"
                                alt="{{ cp.country }}/{{ cp.city }}"
                                class="img-responsive">
                          </td>
                          <td>{{ cp.open_date }} - {{ cp.open_time }}</td>
                          <td>{{ cp.end_date }} - {{ cp.end_time }}</td>
                          <td>
                            <div *ngIf="cp.duration == '0 min'; then online else duration"></div>
                            <ng-template #duration>{{ cp.duration }}</ng-template>
                            <ng-template #online><div class="online">online</div></ng-template>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              <!-- </ul> -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><!-- container -->



</section>
